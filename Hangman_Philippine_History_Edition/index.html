<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Hangman: PH History</title>
<link href="https://fonts.googleapis.com/css2?family=Permanent+Marker&display=swap" rel="stylesheet">
<style>
body, html {
  margin: 0;
  padding: 0;
  height: 100%;
  font-family: 'Permanent Marker', cursive;
  background: #f0e7db;
  overflow: hidden;
  display: flex;
  justify-content: center;
  align-items: center;
}

/* COMMON SCREEN CONTAINER */
.screen {
  position: absolute;
  width: 100%;
  height: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
  transition: opacity 1s ease;
  opacity: 0;
  pointer-events: none;
}

/* Visible screen */
.screen.active {
  opacity: 1;
  pointer-events: all;
}

/* Loading Screen */
.progress-bar {
  width: 300px;
  height: 20px;
  border: 3px solid #333;
  border-radius: 15px;
  overflow: hidden;
  background: #fff;
  margin-top: 20px;
  box-shadow: 2px 2px 0 #333;
}

.progress-fill {
  height: 100%;
  width: 0;
  background-color: #3a2715;
  transition: width 0.3s ease;
}

/* Splash Screen */
.splash-title {
  font-size: 2.5rem;
  color: #3a2715;
  text-shadow: 2px 2px #fff;
  margin-bottom: 20px;
  animation: fadeUp 1.5s ease;
}

/* Home Screen */
.container {
  text-align: center;
  background-color: rgba(255,255,255,0.85);
  padding: 50px 40px;
  border-radius: 25px;
  border: 4px dashed #333;
  box-shadow: 5px 5px 0 #333;
  width: 80%;
  max-width: 900px;
  animation: floatIn 1s ease;
}

.container h1 {
  font-size: 3rem;
  color: #333;
  margin-bottom: 40px;
  text-shadow: 2px 2px #fff;
}

.btn {
  display: block;
  width: 40%;
  margin: 15px auto;
  padding: 15px;
  font-size: 1.2rem;
  border: 3px solid #333;
  border-radius: 15px;
  cursor: pointer;
  background-color: #fffbf0;
  transition: all 0.2s ease;
  box-shadow: 3px 3px 0 #333;
}
.btn:hover { transform: translate(-2px,-2px) scale(1.05); box-shadow:5px 5px 0 #333; }
.btn.exit { border-color:#b52a3a; box-shadow:3px3px0 #b52a3a; background:#ffe5e5; }
.btn.exit:hover { box-shadow:5px5px0 #b52a3a; }

@keyframes fadeUp { from { opacity: 0; transform: translateY(40px);} to { opacity: 1; transform: translateY(0);} }
@keyframes floatIn { from {opacity:0; transform:translateY(-30px);} to {opacity:1; transform:translateY(0);} }

p { margin-top: 15px; font-size: 1.2rem; }
</style>
</head>
<body>

<!-- AUDIO -->
<audio id="bgMusic" src="assets/audio/wap.mp3" preload="auto" loop></audio>

<!-- LOADING SCREEN -->
<div id="loadingScreen" class="screen active">
  <h1>Loading Hangman...</h1>
  <div class="progress-bar">
    <div class="progress-fill"></div>
  </div>
  <p id="tapText" style="display:none;">Tap anywhere to start</p>
</div>

<!-- SPLASH SCREEN -->
<div id="splashScreen" class="screen">
  <div class="splash-title">HANGMAN: PHILIPPINE HISTORY EDITION </div>
  <div class="splash-subtitle">BSIT 4A 2025</div>
</div>

<!-- HOME SCREEN -->
<div id="homeScreen" class="screen">
  <div class="container">

    <!-- top icons -->
    <div id="homeTopIcons" style="position:absolute; top:12px; right:12px; display:flex; gap:12px; z-index:200;">
      <button id="homeMusicToggle" title="Toggle Music" style="font-size:1.3rem; width:40px; height:40px; border:none; background:#fffbf0; border-radius:8px; box-shadow:3px3px0 #333; cursor:pointer;">ðŸŽµ</button>
    </div>
    
    <h1>Hangman: PH History Edition</h1>
    <button class="btn" id="spainBtn">Spain Era</button>
    <button class="btn" id="americaBtn">American Era</button>
    <button class="btn" id="japanBtn">Japanese Era</button>
    <button class="btn exit" id="exitBtn">Exit</button>
  </div>
</div>

<script>
const music = document.getElementById("bgMusic");
const loadingScreen = document.getElementById("loadingScreen");
const splashScreen = document.getElementById("splashScreen");
const homeScreen = document.getElementById("homeScreen");
const progressFill = document.querySelector(".progress-fill");
const tapText = document.getElementById("tapText");

// Create music toggle button for home screen
const homeMusicBtn = document.createElement("button");
homeMusicBtn.id = "homeMusicToggle";
homeMusicBtn.title = "Toggle Music";
homeMusicBtn.textContent = "ðŸŽµ";
homeMusicBtn.style.cssText = `
    font-size:1.3rem; width:40px; height:40px; border:none;
    background:#fffbf0; border-radius:8px; box-shadow:3px3px0 #333; cursor:pointer;
    position:absolute; top:12px; right:12px; z-index:200;
`;
homeScreen.appendChild(homeMusicBtn);

let homeMusicPlaying = true;

//  Check if user already visited home
const hasVisited = localStorage.getItem("visitedHome");

if(hasVisited){
    // Skip loading and splash, show home directly
    loadingScreen.classList.remove("active");
    splashScreen.classList.remove("active");
    homeScreen.classList.add("active");
    music.volume = 1;
    music.play().catch(()=>{});
}else{
    // Show loading -> splash -> home normally
    let progress = 0;
    const interval = setInterval(()=>{
        progress += 10;
        progressFill.style.width = progress+"%";
        if(progress>=100){
            clearInterval(interval);
            tapText.style.display = "block";

            document.body.addEventListener("click", ()=>{
                music.volume = 1;
                music.play().catch(()=>{});
                loadingScreen.classList.remove("active");
                splashScreen.classList.add("active");

                setTimeout(()=>{
                    splashScreen.classList.remove("active");
                    homeScreen.classList.add("active");
                    // mark as visited
                    localStorage.setItem("visitedHome","true");
                },5000);
            }, {once:true});
        }
    }, 200);
}

// Music toggle for home screen
homeMusicBtn.addEventListener("click", () => {
    if(homeMusicPlaying){
        music.pause();
        homeMusicBtn.textContent = "ðŸ”‡";
    } else {
        music.play().catch(()=>{});
        homeMusicBtn.textContent = "ðŸŽµ";
    }
    homeMusicPlaying = !homeMusicPlaying;
});

// HOME Navigation buttons
document.getElementById("spainBtn").addEventListener("click", () => window.location.href="spain.html");
document.getElementById("americaBtn").addEventListener("click", () => window.location.href="america.html");
document.getElementById("japanBtn").addEventListener("click", () => window.location.href="japan.html");

// Exit button reloads index
document.getElementById("exitBtn").addEventListener("click", () => window.location.href="index.html");

</script>


</body>
</html>
